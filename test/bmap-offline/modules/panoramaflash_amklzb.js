/**/_jsload2&&_jsload2('panoramaflash', 'A.extend(Pa.prototype,{Mi:function(){for(var a=0;a<D.Wq.length;a++)D.Wq[a](this);this.Mf!=q&&this.dispatchEvent(new P("onvisible_poi_type_changed"),{visiblePOIType:this.Mf});this.dl=this.gh();this.lr=this.gd=t;this.jq={};this.fd=new Zk(this);this.bS();this.RP();this.TP();if(this.fb||this.Jb)this.fb?this.Cc(this.fb,this.Je):this.va(this.Jb)},TP:function(){var a=this;setInterval(function(){if(a.Wb()){var b=a.gh();b.Sb(a.dl)||(a.fd.set("size",{width:b.width,height:b.height}),a.dl=b,a.dispatchEvent(new P("size_changed")))}}, 80)},bS:function(){var a=this.fd,b=this;a.addEventListener("clicked_position",function(a){b.dispatchEvent(new P("onclicked_position"),a)});a.addEventListener("thumbnail_complete",function(){b.dispatchEvent(new P("onthumbnail_complete"))});a.addEventListener("indoor_enter",function(a){a.data.V4===q?b.wj({haveBreakId:t}):b.wj({haveBreakId:p});b.dispatchEvent(new P("onhaveBreakId_changed"))});a.addEventListener("first_thumb_complete",function(){var a,e;if(b.gd!==p){b.gd=p;a=this;b.fb=a.get("id");"street"!= b.Je&&(b.Je="street",b.hy("inter"));b.In=a.get("links");e=a.get("position");b.Jb=e;e=a.get("pov");!b.Ka.heading&&!b.Ka.pitch?b.Ka=e:(e.heading!=b.Ka.heading||e.pitch!=b.Ka.pitch)&&a.set("pov",b.Ka);e=a.get("zoom");1==!b.Lc&&1!=e?b.Lc==e:b.Lc!=e&&a.set("zoom",b.Lc);e=q;for(var f in b.Ie)e=b.Ie[f],delete b.Ie[f],b.Pa(e);b.m.navigationControl===t&&a.set("navigationControlVisible",t);var g=function(b){a.as("toggleUI",{topo:b.linksControl,wellLid:b.clickOnRoad,innerExit:t,innerFloor:b.indoorFloorControl})}; g(b.m);b.addEventListener("clickonroad_changed",function(){g(b.m)});b.addEventListener("links_visible_changed",function(){g(b.m)});b.addEventListener("onindoorfloor_options_changed",function(){g(b.m)});b.addEventListener("navigation_visible_changed",function(){a.set("navigationControlVisible",b.m.navigationControl)});if(0<b.Ug.length){f=0;for(e=b.Ug.length;f<e;f++)b.Ug[f].register(b.R,b,b.fd);var i="",k=[];f=0;for(e=b.Yq.length;f<e;f++)i=b.Yq[f].yM,k=b.Yq[f].xM,b[i].apply(b,k)}b.m.visible?b.show(): b.$()}});a.addEventListener("pano_error",function(){b.dispatchEvent(new P("error"))});a.addEventListener("id_changed",function(a){if(b.gd||b.fb==q||"inter"==b.Je)b.fb=a.data;b.dispatchEvent(new P("onid_changed"))});a.addEventListener("position_changed",function(a){b.gd?b.Jb=b.fd.get("position"):b.Jb==q&&(b.Jb=a.data);b.dispatchEvent(new P("onposition_changed"))});a.addEventListener("pov_changed",function(a){if(b.gd||b.Ka.heading==q)b.Ka=a.data;b.dispatchEvent(new P("onpov_changed"))});a.addEventListener("links_changed", function(a){if(b.gd||0==b.In.length)b.In=a.data;b.dispatchEvent(new P("onlinks_changed"))});a.addEventListener("zoom_changed",function(a){if(b.gd||b.Lc==q)b.Lc=a.data;b.dispatchEvent(new P("onzoom_changed"))});a.addEventListener("sdata_loaded",function(a){b.hy(a.data.panoType);b.dispatchEvent(new P("oncopyright_changed"),{copyright:a.data.copyright});if(b.lr){for(var e in b.jq)b[e](b.jq[e]);b.lr=t;b.jq={}}});a.addEventListener("overlay_mouseclick",function(a){a=b.Ie[a.data.markerId];a.dispatchEvent(new P("onclick"), {type:"click",target:a})});a.addEventListener("overlay_mouseover",function(a){a=b.Ie[a.data.markerId];a.dispatchEvent(new P("onmouseover"),{type:"mouseover",target:a})});a.addEventListener("overlay_mouseout",function(a){a=b.Ie[a.data.markerId];a.dispatchEvent(new P("onmouseout"),{type:"mouseout",target:a})})},RP:function(){var a=this;A.V(this.R,ia.fa.Re?"DOMMouseScroll":"onmousewheel",function(b){if(a.m.enableScrollWheelZoom&&a.m.visible){var c=-b.detail/3||b.wheelDelta/120,c=a.ja()+c;a.Qc(c);Fb(b)}})}, Cc:function(a,b,c){"object"===typeof b&&(c=b,b=l);if(!this.gd||a&&a!=this.fb)this.gd||(this.fb=a,this.Je=b||"street",this.Jb=q),this.fd.set("id",{id:a,type:b||"street"}),this.lr=p,c&&c.pov&&this.rd(c.pov)},va:function(a){if(!this.gd||a&&!this.Jb.Sb(a))this.gd||(this.Jb=a,this.fb=q),this.fd.set("position",a),this.lr=p},rd:function(a){a&&(90<a.pitch&&(a.pitch=90),-90>a.pitch&&(a.pitch=-90),this.gd?this.lr?this.jq.setPov=a:this.fd.set("pov",a):this.Ka=a)},Qc:function(a){a!=this.Lc&&(a>hf&&(a=hf),a<jf&& (a=jf),this.gd?this.fd.set("zoom",a):this.Lc=a,this.jq.setZoom=a)},show:function(){this.m.visible=p;this.Af&&(this.P&&this.P.Ra()===this.R)&&A.U.show(this.Af);this.fd&&this.fd.Vq&&(this.fd.Vq.style.left="0");this.gd&&(this.ql===this.Wb()&&this.fd.set("id",{id:this.ql,type:this.qS||"street"}),this.dispatchEvent(new P("onvisible_changed")))},$:function(){this.m.visible=t;this.gd&&(this.ql=this.fb,this.qS=this.Je,this.fd.as("closePano"));this.fb=q;this.fd&&this.fd.Vq&&(this.fd.Vq.style.left="-9999px"); this.dispatchEvent(new P("onvisible_changed"))},yB:function(a){function b(a,b){return function(){a.Yq.push({yM:b,xM:arguments})}}if(this.gd)a.register(this.R,this,this.fd);else for(var c=a.getPanoMethodList(),e="",f=0,g=c.length;f<g;f++)e=c[f],this[e]=b(this,e);this.Ug.push(a)},IE:function(a){this.gd&&a.dispose();for(var b=this.Ug.length;b--;)this.Ug[b]===a&&this.Ug.splice(b,1)},Dt:function(a){this.Mf=a||"none";this.dispatchEvent(new P("onvisible_poi_type_changed"),{visiblePOIType:this.Mf})},Pa:function(a){this.Ie[a.jd]= a;this.gd&&this.dispatchEvent(new P("onadd_overlay"),{overlay:a})},Ob:function(a){var b=a.jd;this.gd&&this.dispatchEvent(new P("onremove_overlay"),{overlay:a});delete this.Ie[b]},Io:function(){var a=this.fd.get("indoorData");a&&a.pid&&this.Cc(a.pid)},WE:function(a){this.fd.set("interactiveState",a)}});gk=Pa.prototype; V(gk,{setId:gk.Cc,setPosition:gk.va,setPov:gk.rd,setZoom:gk.Qc,show:gk.show,hide:gk.$,addPlugin:gk.yB,removePlugin:gk.IE,addOverlay:gk.Pa,removeOverlay:gk.Ob,setPanoramaPOIType:gk.Dt,exitInter:gk.Io,setInteractiveState:gk.WE});function $k(){this.NS=(this.Uz=window.ActiveXObject&&!(window.opera&&!window.opera.nodeType))?\' classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0"\':\' type="application/x-shockwave-flash"\';this.$H=["id","width","height","align","data"];this.aI="wmode movie flashvars scale quality play loop menu salign bgcolor base allowscriptaccess allownetworking allowfullscreen seamlesstabbing devicefont swliveconnect".split(" ")} A.extend($k.prototype,{create:function(a,b){var c=this.kR(a);b&&"string"===typeof b&&(b=document.getElementById(b));b?b.innerHTML=c:document.write(c)},remove:function(a){if((a=this.nL(a))&&this.Uz){a.style.display="none";for(var b in a)"function"===typeof a[b]&&(a[b]=q);window.UO&&setTimeout(window.UO,0)}a.parentNode.removeChild(a)},cX:function(){function a(){var c=function(){var a=navigator;if(a.plugins&&a.mimeTypes.length){if((a=a.plugins["Shockwave Flash"])&&a.description)return a.description.replace(/([a-zA-Z]|\\s)+/, "").replace(/(\\s)+r/,".")+".0"}else if(b.Uz)try{var c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(c)return c.GetVariable("$version").replace(/WIN/g,"").replace(/,/g,".")}catch(g){}}();a=function(){return c};return c}var b=this;return a()},nL:function(a){return document.getElementById(a)},NG:function(a,b){for(var a=a.split("."),b=b.split("."),c=Math.max(a.length,b.length),e=0;e<c;e++){var f=a[e],g=b[e];if(!f||!g)return!f&&!g?0:f?1:-1;f=Number(f);g=Number(g);if(f<g)return-1;if(f>g)return 1}return 0}, kR:function(a){a=a||{};a.movie=a.url||"";a.altHtml=a.errorMessage||"";if(a.vars){var b=a.vars,c=[],e=q,f=q;for(e in b)f=b[e],c.push(e+"="+encodeURIComponent(f));a.flashvars=c.join("&")}a.minVer=a.ver;b=a.minVer;c=a.maxVer;if(b||c)if(e=this.cX(),!e||b&&0>this.NG(e,b)||c&&0<this.NG(e,c))return a.altHtml||"";e=["<object",this.NS];a.data=a.movie;for(b=0;b<this.$H.length;b++)c=this.$H[b],a.hasOwnProperty(c)&&e.push(" ",c,\'="\',a[c],\'"\');e.push(">");for(b=0;b<this.aI.length;b++)c=this.aI[b],a.hasOwnProperty(c)&& e.push(\'<param name="\',c,\'" value="\',a[c],\'"/>\');e.push("</object>");return e.join("")}});function al(a,b){this.W=a;this.gR=b;this.Jh={};this.Xy()}A.extend(al.prototype,{Xy:function(){var a=this,b=a.W;b.addEventListener("add_overlay",function(b){b=b.overlay;b.ya(a.W,a.gR);a.Jh[b.jd]=b});b.addEventListener("remove_overlay",function(b){b=b.overlay;b.remove();delete a.Jh[b.jd]})}});A.extend(nf.prototype,{ya:function(a,b){this.W=a;this.la()||this.va(this.W.la());this.Fa=b;this.mb()},mb:function(){var a=this.la(),a=Mc.Vd.zg(a),a={markerId:this.jd,catalog:"FD01",name:this.tk(),rank:this.Mo(),x:a.x,y:a.y,color:this.pm(),hoverColor:this.DL,backgroundHoverColor:this.DJ,borderColor:this.borderColor,borderHoverColor:this.HJ,backgroundColor:this.backgroundColor,padding:this.padding,fontSize:this.fontSize,borderWidth:this.borderWidth};if(this.LD||this.getImageData())a.imageUrl=this.LD, a.imageData=this.getImageData(),a.size=this.xb(),a.image=this.Tw(),a.catalog="FD02",this.xb()&&(a.width=this.xb()[0],a.height=this.xb()[1]);this.Fa.pN(a)},hide:function(){this.Ua=t;this.Fa&&this.Fa.wo(this.jd,"visible",t)},show:function(){this.Ua=p;this.Fa&&this.Fa.wo(this.jd,"visible",p)},isVisible:x("Ua"),Lf:function(a,b){this.Fa&&("position"==a&&(b=Mc.Vd.zg(b),b={lng:b.x,lat:b.y}),this.Fa.wo(this.jd,a,b))},remove:function(){this.dispatchEvent(new P("onremove"),{type:"remove",target:this});this.Fa.iK([this.jd])}});var bl={none:"",transit:"FE0A",hotel:"FE02",catering:"FE01",movie:"FE06",indoor_scene:"FEFE"},cl={none:["-1",""],transit:["0","m_transit.png"],hotel:["1","m_hotel.png"],catering:["2","m_catering.png"],movie:["3","m_movie.png"],transit:["4","m_transit.png"],indoor_scene:["5","m_indoor_scene.png"]}; A.extend(qf.prototype,{ya:function(a,b){this.W=a;this.Fa=b;this.mb()},mb:function(){var a=this.la(),a=Mc.Vd.zg(a),b=this.DR(),c=this.uD();this.Fa.pN({markerId:this.jd,catalog:b,name:this.To(),rank:this.Mo(),x:a.x,y:a.y,heading:c.heading,pitch:c.pitch,pid:c.panoId,panoIId:c.panoIId})},DR:function(){var a=this.Oo().match(/.*\\/(.*)/)[1],b;for(b in cl)if(cl[b][1]==a)return bl[b]},hide:function(){this.Ua=t;this.Fa.wo(this.jd,"visible",t)},show:function(){this.Ua=p;this.Fa.wo(this.jd,"visible",p)},isVisible:x("Ua"), Lf:function(a,b){"position"==a&&(b=Mc.Vd.zg(b),b={lng:b.x,lat:b.y});this.Fa.wo(this.jd,a,b)},remove:function(){this.dispatchEvent(new P("onremove"),{type:"remove",target:this});this.Fa.iK([this.jd])}});Zk.Pn=new Mc(q,{Se:"api"});function Zk(a){A.lang.Ha.call(this);a&&(this.W=a,this.Ng=q,this.$G=a.R.clientWidth,this.ZG=a.R.clientHeight,new al(a,this))}Zk.uP=D.di("pano");A.lang.xa(Zk,A.lang.Ha,"PanoramaFlashWraper"); A.extend(Zk.prototype,{pN:function(a){this.as("addMarkers",[a])},iK:function(a){this.as("removeMarkers",[a])},wo:function(a,b,c){var e={};e.markerId=a;e[b]=c;this.set("markerProperty",e)},get:function(a){var b=q;"position"==a?(b=this.Ng.get("mercatorPosition"),b=Mc.Vd.vj(new R(b.mercatorX,b.mercatorY))):b=this.Ng.get(a);return b},set:function(a,b){var c=this;"position"==a?Zk.Pn.ij(b,function(a){a&&a.id?c.W.Cc(a.id):c.dispatchEvent(new P("pano_error"))}):"id"==a?c.Ng==q?c.iS(c.W):c.Ng.set&&c.Ng.set("panoOptions", {id:b.id,panoType:b.type,width:c.$G,height:c.ZG}):c.Ng&&c.Ng.set&&c.Ng.set(a,b)},as:function(a,b){return this.Ng.doAction(a,b)},p3:x("Vq"),iS:function(a){var b=this,c=a.m.swfSrc.match(/.*\\//)[0]+"BDStreetScape.swf";b.Ng=p;Zk.Pn.ax(function(e){var f="",g="";"inter"===a.Je?g=a.fb:f=a.fb;f={pid:f,iid:g,panoType:a.Je,heading:a.Ka.heading,pitch:a.Ka.pitch,width:b.$G,height:b.ZG,panoUrl:c,panoTileUrl:Zk.uP.join("|"),domain:Mc.ou,jsInterfaceNamespace:"BMap.PanoramaFlashInterface",swfIndex:b.ca};g=a.m.swfSrc; e&&(e.panoUdt&&e.panoUdt.version&&f)&&(f.udtVersion=e.panoUdt.version);e&&(e.panoSwfAPI&&e.panoSwfAPI.version&&f)&&(f.panoUrl=f.panoUrl+"?version="+e.panoSwfAPI.version,g=g+"?version="+e.panoSwfAPI.version);b.Ng=b.EQ(a.R,f,g)})},EQ:function(a,b,c){var e=new $k,f="PanoramaFlash"+this.ca,g=q,g=L("div");g.style.position="absolute";g.id="PanoramaFlashWraper"+this.ca;g.style.top="0";g.style.left="0";g.style.height="100%";g.style.width="100%";g.style.zIndex=1200;this.Vq=g;a.appendChild(g);e.create({id:f, width:"100%",height:"100%",allowscriptaccess:"always",scale:"showall",wmode:"opaque",quality:"best",url:c,ver:"10.2",errorMessage:"\\u60a8\\u672a\\u5b89\\u88c5Flash Player\\u64ad\\u653e\\u5668\\u6216\\u8005\\u7248\\u672c\\u8fc7\\u4f4e",vars:b},g);return e.nL(f)}});var dl=Zk.prototype;V(dl,{get:dl.get,set:dl.set,doAction:dl.as}); ');
